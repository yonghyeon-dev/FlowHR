{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://flowhr.local/contracts/contract.schema.json",
  "title": "FlowHR Contract Schema",
  "type": "object",
  "required": [
    "owner",
    "version",
    "scope",
    "entities",
    "api",
    "db_changes",
    "invariants",
    "test_plan",
    "observability",
    "rollout",
    "rollback",
    "breaking_changes",
    "consumer_impact"
  ],
  "properties": {
    "owner": {
      "type": "string",
      "minLength": 1
    },
    "version": {
      "type": "string",
      "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$"
    },
    "scope": {
      "type": "object",
      "required": [
        "in",
        "out"
      ],
      "properties": {
        "in": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "out": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      },
      "additionalProperties": true
    },
    "entities": {
      "type": "array"
    },
    "api": {
      "type": "object"
    },
    "db_changes": {
      "type": "object"
    },
    "invariants": {
      "type": "array"
    },
    "test_plan": {
      "type": "object"
    },
    "observability": {
      "type": "object"
    },
    "rollout": {
      "type": "object"
    },
    "rollback": {
      "type": "object"
    },
    "deprecations": {
      "type": "array"
    },
    "breaking_changes": {
      "type": "boolean"
    },
    "consumer_impact": {
      "type": "string"
    }
  },
  "additionalProperties": true
}
